(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{212:function(e,a,t){e.exports=t(390)},217:function(e,a,t){},219:function(e,a,t){e.exports=t.p+"static/media/logo.ee7cd8ed.svg"},220:function(e,a,t){},390:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(18),r=t.n(s),o=(t(217),t(39)),i=t(40),c=t(43),m=t(41),h=t(42),u=t(8),d=(t(219),t(220),t(3)),p=t(22),b=t(23),g=t.n(b),v=t(28),C=t.n(v),y=t(29),E=t.n(y);var f=Object(p.withStyles)(function(e){return{root:{flexGrow:1},paper:{height:140,width:100},control:{padding:2*e.spacing.unit}}})(function(e){return l.a.createElement(d.i,{container:!0,spacing:8,className:e.classes.root},l.a.createElement(d.i,{item:!0},l.a.createElement(E.a,null,l.a.createElement(C.a,null,"Loan amount"),l.a.createElement(g.a,{value:e.baseLoan,type:"number",onChange:e.onBaseLoanChange}))),l.a.createElement(d.i,{item:!0},l.a.createElement(E.a,null,l.a.createElement(C.a,null,"Loan duration"),l.a.createElement(g.a,{value:e.basePeriods,type:"number",onChange:e.onBasePeriodsChange}))),l.a.createElement(d.i,{item:!0},l.a.createElement(E.a,null,l.a.createElement(C.a,null,"Loan rate"),l.a.createElement(g.a,{value:e.baseLoanRate,type:"number",onChange:e.onBaseLoanRateChange}))),l.a.createElement(d.i,{item:!0},l.a.createElement(E.a,null,l.a.createElement(C.a,null,"Issue date"),l.a.createElement(g.a,{value:e.issueDate,type:"date",onChange:e.onIssueDateChange}))))}),k=t(144),O=function(e){return(Math.floor(100*e)/100).toLocaleString("ru-RU",{minimumFractionDigits:2})};var D=Object(p.withStyles)(function(e){return{root:{flexGrow:1},paper:{height:140,width:100},control:{padding:2*e.spacing.unit},currencyCell:{fontFamily:"Courier New",textAlign:"right"}}})(function(e){var a=e.payments.map(function(a,t){return l.a.createElement(d.q,{key:t.toString()},l.a.createElement(d.o,null,t+1,"."),l.a.createElement(d.o,null,k(new Date(a.periodDate),"mm.yyyy")),l.a.createElement(d.o,{className:e.classes.currencyCell},O(a.currentDebt)),l.a.createElement(d.o,{className:e.classes.currencyCell},O(a.payment)),l.a.createElement(d.o,{className:e.classes.currencyCell},O(a.interest)),l.a.createElement(d.o,{className:e.classes.currencyCell},O(a.retirement)))});return l.a.createElement(d.m,null,l.a.createElement(d.p,null,l.a.createElement(d.q,null,l.a.createElement(d.o,null,"Period"),l.a.createElement(d.o,null,"Payment date"),l.a.createElement(d.o,null,"Loan amount"),l.a.createElement(d.o,null,"Minimal payment"),l.a.createElement(d.o,null,"Interests"),l.a.createElement(d.o,null,"Debt retirement"))),l.a.createElement(d.n,null,a))}),L=function(e){return(Math.floor(100*e)/100).toLocaleString("ru-RU",{minimumFractionDigits:2})};var P=Object(p.withStyles)(function(e){return{root:{},overallCol1:{textAlign:"left"},overallCol2:{textAlign:"right"},moneyTypography:{fontFamily:"Courier New"}}})(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:e.classes.overallCol1},l.a.createElement(d.t,null,"Base loan : ")),l.a.createElement("td",{className:e.classes.overallCol2},l.a.createElement(d.t,{className:e.classes.moneyTypography},L(e.baseLoan)))),l.a.createElement("tr",null,l.a.createElement("td",{className:e.classes.overallCol1},l.a.createElement(d.t,null,"Mounth payment : ")),l.a.createElement("td",{className:e.classes.overallCol2},l.a.createElement(d.t,{className:e.classes.moneyTypography},L(e.baseMounthPayment)))),l.a.createElement("tr",null,l.a.createElement("td",{className:e.classes.overallCol1},l.a.createElement(d.t,null,"Interests overall : ")),l.a.createElement("td",{className:e.classes.overallCol2},l.a.createElement(d.t,{className:e.classes.moneyTypography},L(e.interestsOverall)))))))}),j=t(24),T=t(12);var R=function(e){return l.a.createElement(j.b,{data:e.data,width:650,height:500},l.a.createElement(T.k,{name:"payment"}),l.a.createElement(T.k,{name:"debt"}),l.a.createElement(j.a,{showGrid:!0}),l.a.createElement(j.e,{name:"Mounthly",scaleName:"payment",showGrid:!0,showLine:!0,showTicks:!0}),l.a.createElement(j.e,{name:"Overall",scaleName:"debt",position:"right",showGrid:!1,showLine:!0,showTicks:!0}),l.a.createElement(j.d,{name:"Payment",scaleName:"payment",valueField:"payment",argumentField:"paymentNumber"}),l.a.createElement(j.d,{name:"Interest",scaleName:"payment",valueField:"interest",argumentField:"paymentNumber"}),l.a.createElement(j.d,{name:"Retirement",scaleName:"payment",valueField:"retirement",argumentField:"paymentNumber"}),l.a.createElement(j.d,{name:"Debt",scaleName:"debt",valueField:"currentDebt",argumentField:"paymentNumber"}),l.a.createElement(j.c,null))};var N=Object(p.withStyles)(function(e){return{root:{marginTop:16},tablePaper:{height:700,overflowY:"auto"}}})(function(e){var a=l.a.createElement(d.c,null);return l.a.createElement(d.i,{container:!0,spacing:16,justify:"center"},l.a.createElement(d.i,{item:!0},l.a.createElement(d.k,null,l.a.createElement(f,{baseLoan:e.baseLoan,onBaseLoanChange:e.onBaseLoanChange,basePeriods:e.basePeriods,onBasePeriodsChange:e.onBasePeriodsChange,baseLoanRate:e.baseLoanRate,onBaseLoanRateChange:e.onBaseLoanRateChange,issueDate:e.issueDate,onIssueDateChange:e.onIssueDateChange}))),e.isReady&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement(d.i,{item:!0},l.a.createElement(d.k,{className:e.classes.tablePaper},l.a.createElement(D,{payments:e.payments}))),l.a.createElement(d.i,{item:!0},l.a.createElement(d.k,{className:e.classes.overallPaper},l.a.createElement(P,{baseMounthPayment:e.baseMounthPayment,interestsOverall:e.interestsOverall,baseLoan:e.baseLoan}))),l.a.createElement(d.i,null,l.a.createElement(d.k,null,l.a.createElement(R,{data:e.payments})))," ")||l.a.createElement(d.i,{item:!0},a))}),w=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleAccept=function(){t.props.onAccept(t.props.name)},t.handleKeyPress=function(e){"Enter"===e.key&&t.handleAccept()},t.handleNameChange=t.handleNameChange.bind(Object(u.a)(Object(u.a)(t))),t.handleAccept=t.handleAccept.bind(Object(u.a)(Object(u.a)(t))),t.handleKeyPress=t.handleKeyPress.bind(Object(u.a)(Object(u.a)(t))),t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"handleNameChange",value:function(e){this.props.onNameChanged(e.target.value)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(d.d,{open:this.props.open,onClose:this.props.onCancel,"aria-labelledby":"responsive-dialog-title",onKeyPress:this.handleKeyPress},l.a.createElement(d.h,{id:"responsive-dialog-title"},"Rename current loan"),l.a.createElement(d.f,null,l.a.createElement(d.g,null,"Pleace, enter new name for this loan"),l.a.createElement(d.s,{autoFocus:!0,margin:"dense",label:"loan name",fullWidth:!0,value:this.props.name,onChange:this.handleNameChange})),l.a.createElement(d.e,null,l.a.createElement(d.b,{onClick:this.props.onCancel,color:"primary"},"Cancel"),l.a.createElement(d.b,{onClick:this.handleAccept,color:"primary"},"Rename"))))}}]),a}(n.Component),S=t(93),I=t.n(S);var B=function(e){return l.a.createElement(d.j,null,l.a.createElement(I.a,e))},A=t(149),F=t.n(A),M=t(148),x=t.n(M);var J=function(e){return l.a.createElement("div",null,l.a.createElement(d.d,{open:e.open,onClose:e.onCancel},l.a.createElement(d.h,null,"Confirm deletion of ",e.name),l.a.createElement(d.f,null,l.a.createElement(d.g,null,"Are you sure you want to delete ",e.name," ?")),l.a.createElement(d.e,null,l.a.createElement(d.b,{onClick:e.onCancel,color:"primary"},"Cancel"),l.a.createElement(d.b,{onClick:e.onAccept,color:"primary"},"Delete"))))},G=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleTabChange=function(e,a){var n=t.props.pages[t.props.activePage];t.setState({renameTabDraft:n.title}),t.props.onTabChange(a)},t.handleTabChange=t.handleTabChange.bind(Object(u.a)(Object(u.a)(t))),t.handleRenameTabClick=t.handleRenameTabClick.bind(Object(u.a)(Object(u.a)(t))),t.handleRenameTabCancel=t.handleRenameTabCancel.bind(Object(u.a)(Object(u.a)(t))),t.handleRenameTabAccept=t.handleRenameTabAccept.bind(Object(u.a)(Object(u.a)(t))),t.handleNameChange=t.handleNameChange.bind(Object(u.a)(Object(u.a)(t))),t.handleTabDoubleClick=t.handleTabDoubleClick.bind(Object(u.a)(Object(u.a)(t))),t.handleDeleteTabClicked=t.handleDeleteTabClicked.bind(Object(u.a)(Object(u.a)(t))),t.handleDeleteCancel=t.handleDeleteCancel.bind(Object(u.a)(Object(u.a)(t))),t.handleDeleteAccept=t.handleDeleteAccept.bind(Object(u.a)(Object(u.a)(t))),t.state={renameTab:!1,renameTabDraft:"",askDelete:!1},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"handleRenameTabClick",value:function(){var e=this.props.pages[this.props.activePage];this.setState({renameTab:!0,renameTabDraft:e.title})}},{key:"handleTabDoubleClick",value:function(){var e=this.props.pages[this.props.activePage];this.setState({renameTab:!0,renameTabDraft:e.title})}},{key:"handleRenameTabCancel",value:function(){var e=this.props.pages[this.props.activePage];this.setState({renameTab:!1,renameTabDraft:e.title})}},{key:"handleRenameTabAccept",value:function(e){this.props.onRenameTab(e),this.setState({renameTab:!1})}},{key:"handleNameChange",value:function(e){this.setState({renameTabDraft:e})}},{key:"handleDeleteTabClicked",value:function(){this.setState({askDelete:!0})}},{key:"handleDeleteCancel",value:function(){this.setState({askDelete:!1})}},{key:"handleDeleteAccept",value:function(){this.setState({askDelete:!1}),this.props.onDeleteTabClicked()}},{key:"render",value:function(){var e=this,a=this.props.pages[this.props.activePage],t=this.props.pagesIds.map(function(a,t){return l.a.createElement(d.l,{label:e.props.pages&&e.props.pages[a]&&e.props.pages[a].title,value:a,key:a,onDoubleClick:e.handleTabDoubleClick})});return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.i,{container:!0,direction:"row",className:this.props.classes.tabPanel},l.a.createElement(d.i,{item:!0},l.a.createElement(d.i,{container:!0,direction:"row"},l.a.createElement(d.i,{item:!0},l.a.createElement(d.r,{value:this.props.activePage,onChange:this.handleTabChange},t)))),l.a.createElement(d.i,{item:!0},l.a.createElement(B,{onClick:this.props.onAddTabClicked})),"  ",l.a.createElement(d.i,{container:!0,direction:"row"},l.a.createElement(d.i,{item:!0},l.a.createElement("div",{className:this.props.classes.delButtonContainer},l.a.createElement(d.j,{onClick:this.handleRenameTabClick},l.a.createElement(x.a,null)),l.a.createElement(d.j,{onClick:this.handleDeleteTabClicked},l.a.createElement(F.a,null))))," ")," "),l.a.createElement(w,{open:this.state.renameTab,name:this.state.renameTabDraft,onCancel:this.handleRenameTabCancel,onAccept:this.handleRenameTabAccept,onNameChanged:this.handleNameChange}),l.a.createElement(J,{open:this.state.askDelete,name:a?a.title:"",onCancel:this.handleDeleteCancel,onAccept:this.handleDeleteAccept}))}}]),a}(n.Component),K=Object(p.withStyles)(function(e){return{tabPanel:{marginTop:48},delButtonContainer:{position:"absolute",right:2*e.spacing.unit,top:48}}})(G);t(386),t(387);var W=t(144);var Y=function(e){function a(e){var t;Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleTabChange=function(e){t.setState({activePage:e}),t.updateContent()},t.handleBaseLoanChange=t.handleBaseLoanChange.bind(Object(u.a)(Object(u.a)(t))),t.handleBasePeriodsChange=t.handleBasePeriodsChange.bind(Object(u.a)(Object(u.a)(t))),t.handleBaseLoanRateChange=t.handleBaseLoanRateChange.bind(Object(u.a)(Object(u.a)(t))),t.handleIssueDateChange=t.handleIssueDateChange.bind(Object(u.a)(Object(u.a)(t))),t.handleAddLoanTask=t.handleAddLoanTask.bind(Object(u.a)(Object(u.a)(t))),t.handleRemoveLoanTask=t.handleRemoveLoanTask.bind(Object(u.a)(Object(u.a)(t))),t.handleRenameLoan=t.handleRenameLoan.bind(Object(u.a)(Object(u.a)(t))),t.updateContent=t.updateContent.bind(Object(u.a)(Object(u.a)(t)));var n={},l=[],s="";try{var r=JSON.parse(localStorage.getItem("pages")),i=JSON.parse(localStorage.getItem("pagesIds")),h=localStorage.getItem("activePage");n=r||n,l=i||l,s=h||s}catch(d){console.log("catch while parse stored items: "+d.what()),n={},l=[],s=""}return void 0===n[s]&&l.length>0&&(s=l[0]),t.state={baseLoan:1e6,basePeriods:1,baseLoanRate:.1,issueDate:W(new Date,"yyyy-mm-dd"),activePage:s||"",pages:n||{},pagesIds:l||[],renameLoan:!1},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.updateContent()}},{key:"handleBaseLoanChange",value:function(e){var a=this.state.pages,t=this.state.activePage,n=a[t];isNaN(e.target.value)||(n.baseLoan=e.target.value),n.isReady=!1,a[t]=n,this.setState({pages:a}),this.updateContent()}},{key:"handleBasePeriodsChange",value:function(e){var a=this.state.pages,t=this.state.activePage,n=a[t];isNaN(e.target.value)||(n.basePeriods=e.target.value),n.isReady=!1,a[t]=n,this.setState({pages:a}),this.updateContent()}},{key:"handleBaseLoanRateChange",value:function(e){var a=this.state.pages,t=this.state.activePage,n=a[t];isNaN(e.target.value)||(n.baseLoanRate=e.target.value),n.isReady=!1,a[t]=n,this.setState({pages:a}),this.updateContent()}},{key:"handleIssueDateChange",value:function(e){var a=this.state.pages,t=this.state.activePage,n=a[t];n.issueDate=e.target.value,n.isReady=!1,a[t]=n,this.setState({pages:a}),this.updateContent()}},{key:"handleAddLoanTask",value:function(){var e=this.state.pages,a=this.state.pagesIds,t=function(){function e(){return Math.random().toString(16).slice(-4)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}();a.push(t),e[t]={title:"new loan",id:t,baseLoanRate:this.state.baseLoanRate,issueDate:this.state.issueDate,baseLoan:this.state.baseLoan,basePeriods:this.state.basePeriods,isReady:!1},this.setState({pages:e,pagesIds:a,activePage:t}),this.updateContent()}},{key:"handleRemoveLoanTask",value:function(){var e=this.state.pages,a=this.state.pagesIds,t=this.state.activePage,n=a.indexOf(t),l=a.filter(function(e){return e!=t});e[t]=void 0,n=n<0?0:n>l.length-1?l.length-1:n,this.setState({pages:e,pagesIds:l,activePage:l[n]}),this.updateContent()}},{key:"handleRenameLoan",value:function(e){var a=this.state.activePage,t=this.state.pages,n=t[a];n.title=e,t[a]=n,this.setState({pages:t}),this.updateContent()}},{key:"preparePayments",value:function(e){return function(e){var a=[],t=parseFloat(e.baseLoanRate),n=parseFloat(e.baseLoan),l=12*parseFloat(e.basePeriods),s=200;console.assert(e.issueDate,"issue date was not specified");for(var r=e.issueDate||(new Date).toDateString(),o=new Date(r).getYear()+1900,i=new Date(r).getMonth(),c=t/12,m=Math.pow(1+c,l),h=n*(c*m/(m-1)),u=h,d=1,p=[366,365,365,365],b=function(e,a){return new Date(e,a+1,0).getDate()},g=0;n>=.01&&s-- >0;){var v=n*(t/p[o%4]*b(o,i)),C=(i+1)%12,y=h,E=y-v;n-E<300&&(y=v+n,E=n),a.push({currentDebt:parseFloat(n),periodDate:o+"-"+(C+1),paymentNumber:d,payment:y,interest:v,retirement:E}),g+=v,d+=1,(i+=1)>=12&&(i%=12,o+=1),n-=E,l-=1}return{payments:a,baseLoan:e.baseLoan,baseMounthPayment:u,interestsOverall:g}}(e)}},{key:"updateContent",value:function(){var e=this;this.setState(function(a,t){var n=a.pages,l=a.pagesIds,s=a.activePage,r=n[s];if(void 0!==r){var o=JSON.stringify(n);localStorage.setItem("pages",o);var i=JSON.stringify(l);localStorage.setItem("pagesIds",i),localStorage.setItem("activePage",s);var c={title:r?r.title:"New loan",baseLoanRate:r?r.baseLoanRate:a.baseLoanRate,issueDate:r?r.issueDate:a.issueDate,baseLoan:r?r.baseLoan:a.baseLoan,basePeriods:r?r.basePeriods:a.basePeriods},m=e.preparePayments(c);return r.payments=m.payments,r.baseMounthPayment=m.baseMounthPayment,r.interestsOverall=m.interestsOverall,r.isReady=!0,n[s]=r,{pages:n}}})}},{key:"render",value:function(){var e=this.state.pages,a=(this.state.pagesIds,e[this.state.activePage]),t=a&&a.payments,n=a&&a.isReady,s=a&&l.a.createElement("div",{className:this.props.classes.taskContent},l.a.createElement(N,{baseLoan:a.baseLoan,onBaseLoanChange:this.handleBaseLoanChange,basePeriods:a.basePeriods,onBasePeriodsChange:this.handleBasePeriodsChange,baseLoanRate:a.baseLoanRate,onBaseLoanRateChange:this.handleBaseLoanRateChange,issueDate:a.issueDate,onIssueDateChange:this.handleIssueDateChange,isReady:n,payments:t,baseMounthPayment:a.baseMounthPayment,interestsOverall:a.interestsOverall}));return l.a.createElement("div",{className:this.props.classes.app},l.a.createElement(d.a,{color:"primary"},l.a.createElement(d.t,{variant:"h3",color:"textPrimary",align:"center"},"Loan calculator")),l.a.createElement(K,{pagesIds:this.state.pagesIds,pages:this.state.pages,activePage:this.state.activePage,onTabChange:this.handleTabChange,onRenameTab:this.handleRenameLoan,onAddTabClicked:this.handleAddLoanTask,onDeleteTabClicked:this.handleRemoveLoanTask}),s)}}]),a}(n.Component),q=Object(p.withStyles)(function(e){return{app:{display:"flex",flexFlow:"column",height:"100vh"},taskContent:{flex:1,marginTop:16,overflowY:"auto"}}})(Y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[212,2,1]]]);
//# sourceMappingURL=main.1aa48a23.chunk.js.map