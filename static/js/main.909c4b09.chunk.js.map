{"version":3,"sources":["logo.svg","ParamPanel.js","PaymentTable.js","OverallInfo.js","PaymentGraph.js","LoanTask.js","RenameLoanDialog.js","AddTab.js","ConfirmDialog.js","TabContentController.js","loanUtils.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","withStyles","theme","root","flexGrow","paper","height","width","control","padding","spacing","unit","props","react_default","a","createElement","index_es","container","className","classes","item","FormControl_default","InputLabel_default","Input_default","value","baseLoan","type","onChange","onBaseLoanChange","basePeriods","onBasePeriodsChange","baseLoanRate","onBaseLoanRateChange","issueDate","onIssueDateChange","dateFormat","require","moneyFormat","Math","floor","toLocaleString","minimumFractionDigits","currencyCell","fontFamily","textAlign","additionalPaymentComponent","index","makeEdit","editValue","paymentDate","_React$createElement","Object","defineProperty","e","onAdditionalPaymentChanged","onAdditionalPaymentBlur","paymentEdit","onClick","onAdditionalPaymentFocus","paymentLabel","Add_default","onAddPaymentClicked","addPayment","listItems","payments","map","key","toString","Date","periodDate","currentDebt","payment","interest","additionalPayment","additionalPaymentEdit","retirement","overallCol1","overallCol2","moneyTypography","Fragment","baseMounthPayment","interestsOverall","PaymentGraph","dx_react_chart_material_ui_es","data","dx_react_chart_es","name","showGrid","scaleName","showLine","showTicks","position","valueField","argumentField","marginTop","tablePaper","overflowY","additionalPayments","loader","paymentTableValue","result","assign","justify","src_ParamPanel","isReady","src_PaymentTable","overallPaper","src_OverallInfo","src_PaymentGraph","RenameLoanDialog","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleAccept","onAccept","handleKeyPress","handleNameChange","bind","assertThisInitialized","onNameChanged","target","open","onClose","onCancel","aria-labelledby","onKeyPress","id","autoFocus","margin","label","fullWidth","color","Component","AddTab","ConfirmDialog","TabContentController","handleTabChange","event","activePage","pages","setState","renameTabDraft","title","onTabChange","handleRenameTabClick","handleRenameTabCancel","handleRenameTabAccept","handleTabDoubleClick","handleDeleteTabClicked","handleDeleteCancel","handleDeleteAccept","state","renameTab","askDelete","newName","onRenameTab","onDeleteTabClicked","_this2","tabList","pagesIds","pageId","onDoubleClick","direction","tabPanel","src_AddTab","onAddTabClicked","delButtonContainer","Edit_default","Delete_default","src_RenameLoanDialog","src_ConfirmDialog","right","top","getMounthlyPayment","debt","yearRate","periods","currentMounthRateRought","currentTempRateK","pow","deepcopy","App","updateContent","handleBaseLoanChange","handleBasePeriodsChange","handleBaseLoanRateChange","handleIssueDateChange","handleAddLoanTask","handleRemoveLoanTask","handleRenameLoan","handleAddPaymentClicked","handleAdditionalPaymentChanged","handleAdditionalPaymentFocus","handleAdditionalPaymentBlur","restoredPages","JSON","parse","localStorage","getItem","restoredPagesIds","restoredActivePage","console","log","what","undefined","length","renameLoan","minimalAdditionalPayment","activePageId","currentPage","isNaN","newId","chr4","random","slice","uniqueID","push","activeIndex","indexOf","newPagesIds","filter","page","paymentIndex","assert","newValue","parseFloat","loanDesc","loanParams","currentYearRate","restPeriods","iteration","toDateString","currentYear","getYear","currentMonth","getMonth","currentMounthPayment","currentPaymentNumber","dayOfYears","getDaysInMonth","year","month","getDate","paymentYear","currentAdditionalPayment","paymentNumber","calculateSchedule","pagesStr","stringify","setItem","idsStr","calcResults","preparePayments","contentIsReady","content","taskContent","src_LoanTask","app","variant","align","src_TabContentController","display","flexFlow","flex","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.909c4b09.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Grid, withStyles } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    height: 140,\r\n    width: 100,\r\n  },\r\n  control: {\r\n    padding: theme.spacing.unit * 2,\r\n  },\r\n});\r\n\r\nfunction ParamPanel(props) {\r\n    return <Grid container spacing={8} className={props.classes.root}>\r\n      <Grid item>\r\n        <FormControl>\r\n          <InputLabel>Loan amount</InputLabel>\r\n          <Input value={props.baseLoan}\r\n            type=\"number\"\r\n            onChange={props.onBaseLoanChange} />\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item>\r\n        <FormControl>\r\n          <InputLabel>Loan duration</InputLabel>\r\n          <Input value={props.basePeriods}\r\n            type=\"number\"\r\n            onChange={props.onBasePeriodsChange} />\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item>\r\n        <FormControl>\r\n          <InputLabel>Loan rate</InputLabel>\r\n          <Input value={props.baseLoanRate}\r\n            type=\"number\"\r\n            onChange={props.onBaseLoanRateChange} />\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item>\r\n        <FormControl>\r\n          <InputLabel>Issue date</InputLabel>\r\n          <Input value={props.issueDate}\r\n            type=\"date\"\r\n            onChange={props.onIssueDateChange} />\r\n        </FormControl>\r\n      </Grid>\r\n    </Grid>\r\n}\r\n\r\n\r\nexport default withStyles(styles)(ParamPanel)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Table, TableRow, TableCell, TableHead, TableBody, IconButton, FormControl, InputLabel, Input, Typography } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nvar dateFormat = require('dateformat');\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    height: 140,\r\n    width: 100,\r\n  },\r\n  control: {\r\n    padding: theme.spacing.unit * 2,\r\n  },\r\n  currencyCell: {\r\n    fontFamily: \"Courier New\",\r\n    textAlign: \"right\"\r\n  }\r\n});\r\n\r\nvar moneyFormat = (value) => (Math.floor(value * 100) / 100).toLocaleString('ru-RU', {minimumFractionDigits: 2});\r\n\r\nfunction PaymentTable(props) {\r\n  const addPayment = (index) =>\r\n    <IconButton>\r\n      <AddIcon onClick={() => {\r\n          if (typeof(props.onAddPaymentClicked) === 'function') {\r\n            props.onAddPaymentClicked(index);\r\n          }\r\n        }\r\n      }/>\r\n    </IconButton>\r\n\r\n  const paymentEdit = (index, value, paymentDate) =>\r\n    <FormControl>\r\n      <InputLabel>Additional payment for {paymentDate}</InputLabel>\r\n      <Input value={props.baseLoanRate}\r\n        type=\"number\"\r\n        value={value}\r\n        autoFocus={true}\r\n        onChange={(e) => { if (typeof(props.onAdditionalPaymentChanged) === 'function') {\r\n              props.onAdditionalPaymentChanged(index, e);\r\n            }\r\n          }\r\n        }\r\n        onBlur={(e) => { if (typeof(props.onAdditionalPaymentBlur) === 'function') {\r\n              props.onAdditionalPaymentBlur(index, e)\r\n            }\r\n          }\r\n        } />\r\n    </FormControl>\r\n\r\n  const paymentLabel = (index, value) => \r\n    // <Typography className={props.classes.currencyCell}\r\n    <div\r\n    onClick={(e) => { if (typeof(props.onAdditionalPaymentFocus) === 'function') {\r\n          props.onAdditionalPaymentFocus(index, e)\r\n        }\r\n      }\r\n    }>{moneyFormat(value)} </div> // </Typography>\r\n\r\n  const additionalPaymentComponent = (index, makeEdit, value, editValue, paymentDate) => {\r\n    if (makeEdit) {\r\n      return paymentEdit(index, editValue, paymentDate);\r\n    } else {\r\n      if (value > 0) {\r\n        return paymentLabel(index, value);\r\n      } else {\r\n        return addPayment(index);\r\n      }\r\n    }\r\n  }\r\n    \r\n  const listItems = props.payments.map((item, index) => \r\n    <TableRow key={index.toString()}>\r\n      <TableCell>{index+1}.</TableCell>\r\n      <TableCell>{dateFormat(new Date(item.periodDate), \"mm.yyyy\")}</TableCell>\r\n      <TableCell className={props.classes.currencyCell}>{moneyFormat(item.currentDebt)}</TableCell>\r\n      <TableCell className={props.classes.currencyCell}>{moneyFormat(item.payment)}</TableCell>\r\n      <TableCell className={props.classes.currencyCell}>{moneyFormat(item.interest)}</TableCell>\r\n      <TableCell className={props.classes.currencyCell}>\r\n        {additionalPaymentComponent(index, item.makeEdit, item.additionalPayment, item.additionalPaymentEdit, dateFormat(new Date(item.periodDate), \"mm.yyyy\"))}\r\n      </TableCell>\r\n      <TableCell className={props.classes.currencyCell}>{moneyFormat(item.retirement)}</TableCell>\r\n    </TableRow>\r\n  );\r\n  return <Table>\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell>Period</TableCell>\r\n        <TableCell>Payment date</TableCell>\r\n        <TableCell>Loan amount</TableCell>\r\n        <TableCell>Minimal payment</TableCell>\r\n        <TableCell>Interests</TableCell>\r\n        <TableCell>Additional payment</TableCell>\r\n        <TableCell>Debt retirement</TableCell>\r\n      </TableRow>\r\n    </TableHead>\r\n    <TableBody>\r\n      {listItems}\r\n    </TableBody>\r\n  </Table>;\r\n}\r\n\r\nexport default withStyles(styles)(PaymentTable)\r\n","import React, { Component } from 'react'\r\nimport { Grid, Typography, withStyles } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    //width: '700',\r\n  },\r\n  overallCol1: {\r\n    textAlign: 'left'\r\n  },\r\n  overallCol2: {\r\n    textAlign: 'right'\r\n  },\r\n  moneyTypography: {\r\n    fontFamily: \"Courier New\",\r\n  }\r\n});\r\n\r\nvar moneyFormat = (value) => (Math.floor(value * 100) / 100).toLocaleString('ru-RU', {minimumFractionDigits: 2});\r\n\r\nfunction OverallInfo(props) {\r\n  return <>\r\n    <table>\r\n      <tbody>\r\n        <tr>\r\n          <td className={props.classes.overallCol1}>\r\n            <Typography>Base loan : </Typography>\r\n          </td>\r\n          <td className={props.classes.overallCol2}>\r\n            <Typography className={props.classes.moneyTypography}>{moneyFormat(props.baseLoan)}</Typography>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td className={props.classes.overallCol1}>\r\n            <Typography>Mounth payment : </Typography>\r\n          </td>\r\n          <td className={props.classes.overallCol2}>\r\n            <Typography className={props.classes.moneyTypography}>{moneyFormat(props.baseMounthPayment)}</Typography>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td className={props.classes.overallCol1}>\r\n            <Typography>Interests overall : </Typography>\r\n          </td>\r\n          <td className={props.classes.overallCol2}>\r\n            <Typography className={props.classes.moneyTypography}>{moneyFormat(props.interestsOverall)}</Typography>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    {/* <Grid container className={props.classes.root} direction=\"row\" xs='auto'>\r\n      <Grid item container direction=\"column\">\r\n        <Grid item>\r\n          <Typography>Base loan : </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Mounth payment : </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Mounth payment : </Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item container direction=\"column\">\r\n        <Grid item>\r\n          <Typography>{props.baseLoan}</Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>{props.baseMounthPayment}</Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>{props.baseMounthPayment}</Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid> */}\r\n  </>\r\n}\r\n\r\nexport default withStyles(styles)(OverallInfo);\r\n","import React, { Component } from 'react'\r\nimport { Chart, SplineSeries, ValueAxis, ArgumentAxis, LineSeries, Legend } from '@devexpress/dx-react-chart-material-ui';\r\nimport { ValueScale } from '@devexpress/dx-react-chart';\r\n\r\nfunction PaymentGraph(props) {\r\n  return <Chart data={props.data} width={650} height={500}>\r\n    <ValueScale name=\"payment\" />\r\n    <ValueScale name=\"debt\" />\r\n\r\n    <ArgumentAxis showGrid={true} />\r\n    <ValueAxis name=\"Mounthly\" scaleName=\"payment\" showGrid={true} showLine showTicks />\r\n    <ValueAxis name=\"Overall\" scaleName=\"debt\" position=\"right\" showGrid={false} showLine showTicks />\r\n\r\n    <LineSeries name=\"Payment\" scaleName=\"payment\" valueField=\"payment\" argumentField=\"paymentNumber\" />\r\n    <LineSeries name=\"Interest\" scaleName=\"payment\" valueField=\"interest\" argumentField=\"paymentNumber\" />\r\n    <LineSeries name=\"Retirement\" scaleName=\"payment\" valueField=\"retirement\" argumentField=\"paymentNumber\" />\r\n    <LineSeries name=\"Debt\" scaleName=\"debt\" valueField=\"currentDebt\" argumentField=\"paymentNumber\" />\r\n    <Legend />\r\n  </Chart>\r\n}\r\n\r\nexport default PaymentGraph;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Grid, Paper, AppBar, Typography, Tabs, Tab, withStyles, CircularProgress } from '@material-ui/core';\r\nimport ParamPanel from './ParamPanel';\r\nimport PaymentTable  from './PaymentTable';\r\nimport OverallInfo from './OverallInfo';\r\nimport PaymentGraph from './PaymentGraph';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    marginTop: 16,\r\n  },\r\n  tablePaper: {\r\n    height: 700,\r\n    overflowY: 'auto',\r\n  }\r\n});\r\n\r\nfunction LoanTask(props) {\r\n  const loader = <CircularProgress />\r\n  const preparePaymentTable = (payments, additionalPayments) => {\r\n    return payments.map((item, index) => {\r\n      var result = Object.assign(item, additionalPayments[index] );\r\n      result.additionalPayment = additionalPayments[index] ? additionalPayments[index].value : 0;\r\n      result.additionalPaymentEdit = additionalPayments[index] ? additionalPayments[index].editValue : 0;\r\n      delete result.value;\r\n      delete result.editValue;\r\n      return result;\r\n    } );\r\n  }\r\n\r\n  const paymentTableValue = preparePaymentTable(props.payments, props.additionalPayments ? props.additionalPayments : {});\r\n  return <Grid container spacing={16} justify=\"center\" >\r\n    <Grid item>\r\n      <Paper>\r\n        <ParamPanel \r\n          baseLoan={props.baseLoan}\r\n          onBaseLoanChange={props.onBaseLoanChange} \r\n          basePeriods={props.basePeriods}\r\n          onBasePeriodsChange={props.onBasePeriodsChange}\r\n          baseLoanRate={props.baseLoanRate}\r\n          onBaseLoanRateChange={props.onBaseLoanRateChange}\r\n          issueDate={props.issueDate}\r\n          onIssueDateChange={props.onIssueDateChange}\r\n          />\r\n      </Paper>\r\n    </Grid>\r\n    {(props.isReady \r\n      && <> <Grid item>\r\n        <Paper className={props.classes.tablePaper}>\r\n          <PaymentTable payments={paymentTableValue}\r\n            onAddPaymentClicked={props.onAddPaymentClicked}\r\n            onAdditionalPaymentChanged={props.onAdditionalPaymentChanged}\r\n            onAdditionalPaymentFocus={props.onAdditionalPaymentFocus}\r\n            onAdditionalPaymentBlur={props.onAdditionalPaymentBlur} />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item>\r\n        <Paper className={props.classes.overallPaper}>\r\n          <OverallInfo\r\n                      baseMounthPayment={props.baseMounthPayment}\r\n                      interestsOverall={props.interestsOverall}\r\n                      baseLoan={props.baseLoan} />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid>\r\n        <Paper>\r\n          <PaymentGraph data={props.payments}/>\r\n        </Paper>\r\n      </Grid> </>\r\n      ) \r\n    || <Grid item>{loader}</Grid> }\r\n  </Grid>;\r\n}\r\n\r\nexport default withStyles(styles)(LoanTask);","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Dialog, DialogTitle, DialogContent, Button, DialogContentText, TextField, DialogActions } from '@material-ui/core';\r\n\r\nclass RenameLoanDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleNameChange = this.handleNameChange.bind(this);\r\n    this.handleAccept = this.handleAccept.bind(this);\r\n    this.handleKeyPress = this.handleKeyPress.bind(this);\r\n  }\r\n\r\n  handleNameChange(e) {\r\n    this.props.onNameChanged(e.target.value);\r\n  }\r\n\r\n  handleAccept = () => {\r\n    this.props.onAccept(this.props.name);\r\n  }\r\n\r\n  handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      this.handleAccept();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Dialog open={this.props.open} onClose={this.props.onCancel}\r\n                aria-labelledby=\"responsive-dialog-title\" onKeyPress={this.handleKeyPress}>\r\n          <DialogTitle id=\"responsive-dialog-title\">Rename current loan</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText>Pleace, enter new name for this loan</DialogContentText>\r\n            <TextField autoFocus margin=\"dense\" label=\"loan name\" fullWidth value={this.props.name} onChange={this.handleNameChange}/>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.props.onCancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={this.handleAccept} color=\"primary\">Rename</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default RenameLoanDialog;\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { IconButton } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\n\r\nfunction AddTab(props) {\r\n  return <IconButton>\r\n    <AddIcon {...props}/>\r\n  </IconButton>;\r\n}\r\n\r\nexport default AddTab;\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Dialog, DialogTitle, DialogContentText, DialogContent, DialogActions, Button } from '@material-ui/core';\r\n\r\nfunction ConfirmDialog(props) {\r\n  return <div>\r\n    <Dialog open={props.open} onClose={props.onCancel}>\r\n      <DialogTitle>\r\n        Confirm deletion of {props.name}\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>Are you sure you want to delete {props.name} ?</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={props.onCancel} color=\"primary\">Cancel</Button>\r\n        <Button onClick={props.onAccept} color=\"primary\">Delete</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  </div>\r\n}\r\n\r\nexport default ConfirmDialog;\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Grid, Tabs, Tab, withStyles, IconButton } from '@material-ui/core';\r\nimport AddTab from './AddTab';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport RenameLoanDialog from './RenameLoanDialog';\r\nimport ConfirmDialog from './ConfirmDialog';\r\n\r\nconst styles = theme => ( {\r\n  tabPanel: {\r\n    marginTop: 48\r\n  },\r\n  delButtonContainer: {\r\n    position: 'absolute',\r\n    right: theme.spacing.unit * 2,\r\n    top: 48\r\n  }\r\n});\r\n\r\nclass TabContentController extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleTabChange = this.handleTabChange.bind(this);\r\n    this.handleRenameTabClick = this.handleRenameTabClick.bind(this);\r\n    this.handleRenameTabCancel = this.handleRenameTabCancel.bind(this);\r\n    this.handleRenameTabAccept = this.handleRenameTabAccept.bind(this);\r\n    this.handleNameChange = this.handleNameChange.bind(this);\r\n    this.handleTabDoubleClick = this.handleTabDoubleClick.bind(this);\r\n    this.handleDeleteTabClicked = this.handleDeleteTabClicked.bind(this);\r\n    this.handleDeleteCancel = this.handleDeleteCancel.bind(this);\r\n    this.handleDeleteAccept = this.handleDeleteAccept.bind(this);\r\n\r\n    this.state = {\r\n      renameTab: false,\r\n      renameTabDraft: \"\",\r\n      askDelete: false\r\n    }\r\n  }\r\n\r\n  handleTabChange = (event, value) => {\r\n    const activePage = this.props.pages[this.props.activePage];\r\n    this.setState({\r\n      renameTabDraft: activePage.title\r\n    });\r\n    this.props.onTabChange(value);\r\n  }\r\n\r\n  handleRenameTabClick() {\r\n    const activePage = this.props.pages[this.props.activePage];\r\n    this.setState({\r\n      renameTab: true,\r\n      renameTabDraft: activePage.title\r\n    });\r\n  }\r\n\r\n  handleTabDoubleClick() {\r\n    const activePage = this.props.pages[this.props.activePage];\r\n    this.setState({\r\n      renameTab: true,\r\n      renameTabDraft: activePage.title\r\n    });\r\n  }\r\n\r\n  handleRenameTabCancel() {\r\n    const activePage = this.props.pages[this.props.activePage];\r\n    this.setState({\r\n      renameTab: false,\r\n      renameTabDraft: activePage.title\r\n    });\r\n  }\r\n\r\n  handleRenameTabAccept(newName) {\r\n    this.props.onRenameTab(newName);\r\n    this.setState({\r\n      renameTab: false\r\n    });\r\n  }\r\n\r\n  handleNameChange(newName) {\r\n    this.setState({\r\n      renameTabDraft: newName\r\n    });\r\n  }\r\n\r\n  handleDeleteTabClicked() {\r\n    this.setState({\r\n      askDelete: true\r\n    });\r\n  }\r\n\r\n  handleDeleteCancel() {\r\n    this.setState({\r\n      askDelete: false\r\n    });\r\n  }\r\n\r\n  handleDeleteAccept() {\r\n    this.setState({\r\n      askDelete: false\r\n    });\r\n    this.props.onDeleteTabClicked();\r\n  }\r\n\r\n  render() {\r\n    const activePage = this.props.pages[this.props.activePage];\r\n\r\n    const tabList = this.props.pagesIds.map((pageId, index) => {\r\n      return <Tab label={this.props.pages && this.props.pages[pageId] && this.props.pages[pageId].title} value={pageId} key={pageId} onDoubleClick={this.handleTabDoubleClick}/>\r\n    });\r\n\r\n    return(\r\n    <>\r\n      <Grid container direction=\"row\" className={this.props.classes.tabPanel}>\r\n        <Grid item>\r\n          <Grid container direction=\"row\">\r\n            <Grid item>\r\n              <Tabs value={this.props.activePage} onChange={this.handleTabChange}>\r\n                {tabList}\r\n              </Tabs>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item>\r\n          <AddTab onClick={this.props.onAddTabClicked}></AddTab>\r\n        </Grid>  {/* outer item */}\r\n        <Grid container direction=\"row\">\r\n          <Grid item>\r\n            <div className={this.props.classes.delButtonContainer}>\r\n              <IconButton onClick={this.handleRenameTabClick}>\r\n                <EditIcon />\r\n              </IconButton>\r\n              <IconButton onClick={this.handleDeleteTabClicked}>\r\n                <DeleteIcon />\r\n              </IconButton>\r\n            </div>\r\n          </Grid> {/* button item */}\r\n        </Grid> {/* button container*/}\r\n      </Grid>\r\n      <RenameLoanDialog open={this.state.renameTab}\r\n        name={this.state.renameTabDraft}\r\n        onCancel={this.handleRenameTabCancel}\r\n        onAccept={this.handleRenameTabAccept} \r\n        onNameChanged={this.handleNameChange}/>\r\n      <ConfirmDialog open={this.state.askDelete} \r\n        name={activePage ? activePage.title : \"\"} \r\n        onCancel={this.handleDeleteCancel}\r\n        onAccept={this.handleDeleteAccept}/>\r\n    </>\r\n    )\r\n  } \r\n}\r\n\r\n\r\nexport default withStyles(styles)(TabContentController);\r\n","function getMounthlyPayment(debt, yearRate, periods) {\r\n  const currentMounthRateRought = yearRate / 12.0;\r\n  const currentTempRateK = Math.pow((1.0 + currentMounthRateRought), periods);\r\n  const currentK = currentMounthRateRought * currentTempRateK / (currentTempRateK - 1.0);\r\n  return debt * currentK;\r\n}\r\n\r\nexport function calculateSchedule(loanParams) {\r\n    var payments = [];\r\n    const currentYearRate = parseFloat(loanParams.baseLoanRate);\r\n    var currentDebt = parseFloat(loanParams.baseLoan);\r\n    var restPeriods = parseFloat(loanParams.basePeriods) * 12;\r\n    var iteration = 200;\r\n    console.assert(loanParams.issueDate, \"issue date was not specified\");\r\n    const issueDate = loanParams.issueDate || new Date().toDateString();\r\n    var currentYear = new Date(issueDate).getYear() + 1900;\r\n    var currentMonth = new Date(issueDate).getMonth();\r\n\r\n    var currentMounthPayment = getMounthlyPayment(currentDebt, currentYearRate, restPeriods);\r\n    const baseMounthPayment = currentMounthPayment;\r\n    var currentPaymentNumber = 1;\r\n    const additionalPayments = loanParams.additionalPayments;\r\n\r\n    var dayOfYears = [366, 365, 365, 365];\r\n    var getDaysInYear = (year) => dayOfYears[year % 4];\r\n    var getDaysInMonth = function(year, month) {\r\n      // day = 0 - returns amount of days in previous mounth\r\n      return new Date(year, month+1, 0).getDate();\r\n    };\r\n    var interestsOverall = 0.0;\r\n\r\n    while (currentDebt >= 0.01 && iteration-- > 0) {\r\n      const daysInYear = getDaysInYear(currentYear);\r\n      const daysInMonth = getDaysInMonth(currentYear, currentMonth);\r\n      const monthRate = currentYearRate / daysInYear * daysInMonth;\r\n      const interest = currentDebt * monthRate;\r\n      const paymentDate = (currentMonth + 1) % 12;\r\n      const paymentYear = currentYear + (currentMonth === 11 ? 1 : 0);\r\n      var payment = currentMounthPayment;\r\n      const currentAdditionalPayment = additionalPayments ? (additionalPayments[currentPaymentNumber - 1] ? additionalPayments[currentPaymentNumber - 1].value : 0) : 0;\r\n      var retirement = payment - interest + currentAdditionalPayment;\r\n      if (currentDebt - retirement < 300) {\r\n        payment = interest + currentDebt;\r\n        retirement = currentDebt;\r\n      }\r\n      // console.log(payments.length + \". \" \r\n      //   + currentDebt + \": \" \r\n      //   + interest + \" + \" \r\n      //   + retirement + \" = \"\r\n      //   + payment);\r\n      payments.push({\r\n        currentDebt: parseFloat(currentDebt),\r\n        periodDate: paymentYear + \"-\" + (paymentDate+1), // [0 .. 11] => [1 .. 12]\r\n        paymentNumber: currentPaymentNumber,\r\n        payment: payment,\r\n        interest: interest,\r\n        retirement: retirement\r\n      });\r\n      interestsOverall += interest;\r\n      \r\n      currentPaymentNumber += 1;\r\n      currentMonth += 1;\r\n      if (currentMonth >= 12) {\r\n        currentMonth = currentMonth % 12;\r\n        currentYear += 1;\r\n      }\r\n      currentDebt -= retirement;\r\n      restPeriods -= 1;\r\n      if(currentAdditionalPayment > 0) {\r\n        currentMounthPayment = getMounthlyPayment(currentDebt, currentYearRate, restPeriods);\r\n      }\r\n    }\r\n    return {\r\n      payments : payments,\r\n      baseLoan : loanParams.baseLoan,\r\n      baseMounthPayment : baseMounthPayment,\r\n      interestsOverall : interestsOverall,\r\n\r\n    };\r\n  }","import React, { Component } from 'react';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport { Grid, Paper, AppBar, Typography, Tabs, Tab, Zoom, Fab, withStyles, IconButton, NoSsr } from '@material-ui/core';\r\nimport LoanTask from './LoanTask';\r\nimport RenameLoanDialog from './RenameLoanDialog';\r\nimport TabContentController from './TabContentController';\r\nimport { calculateSchedule } from './loanUtils';\r\n\r\n\r\nvar dateFormat = require('dateformat');\r\nvar deepcopy = require('deep-copy');\r\n\r\nconst styles = theme => ( {\r\n  app: {\r\n    display: \"flex\",\r\n    flexFlow: \"column\",\r\n    height: \"100vh\"\r\n  },\r\n  taskContent: {\r\n    flex: 1,\r\n    marginTop: 16,\r\n    overflowY: 'auto',\r\n  }\r\n});\r\n\r\nfunction uniqueID(){\r\n  function chr4(){\r\n    return Math.random().toString(16).slice(-4);\r\n  }\r\n  return chr4() + chr4() +\r\n    '-' + chr4() +\r\n    '-' + chr4() +\r\n    '-' + chr4() +\r\n    '-' + chr4() + chr4() + chr4();\r\n}\r\n\r\nclass App extends Component {\r\n  constructor (props) {\r\n    super(props);\r\n    this.handleBaseLoanChange = this.handleBaseLoanChange.bind(this);\r\n    this.handleBasePeriodsChange = this.handleBasePeriodsChange.bind(this);\r\n    this.handleBaseLoanRateChange = this.handleBaseLoanRateChange.bind(this);\r\n    this.handleIssueDateChange = this.handleIssueDateChange.bind(this);\r\n    this.handleAddLoanTask = this.handleAddLoanTask.bind(this);\r\n    this.handleRemoveLoanTask = this.handleRemoveLoanTask.bind(this);\r\n    this.handleRenameLoan = this.handleRenameLoan.bind(this);\r\n    this.handleAddPaymentClicked = this.handleAddPaymentClicked.bind(this);\r\n    this.handleAdditionalPaymentChanged = this.handleAdditionalPaymentChanged.bind(this)\r\n    this.handleAdditionalPaymentFocus = this.handleAdditionalPaymentFocus.bind(this);\r\n    this.handleAdditionalPaymentBlur = this.handleAdditionalPaymentBlur.bind(this);\r\n    this.updateContent = this.updateContent.bind(this);\r\n\r\n    var pages = {};\r\n    var pagesIds = [];\r\n    var activePage = \"\";\r\n    \r\n    try {\r\n      var restoredPages = JSON.parse(localStorage.getItem(\"pages\") );\r\n      var restoredPagesIds = JSON.parse(localStorage.getItem(\"pagesIds\") );\r\n      var restoredActivePage = localStorage.getItem(\"activePage\");\r\n      pages = restoredPages || pages;\r\n      pagesIds = restoredPagesIds || pagesIds;\r\n      activePage = restoredActivePage || activePage;\r\n    } catch(e) {\r\n      console.log(\"catch while parse stored items: \" + e.what());\r\n      pages = {};\r\n      pagesIds = [];\r\n      activePage = \"\";\r\n    }\r\n\r\n    if (pages[activePage] === undefined && pagesIds.length > 0) {\r\n      activePage = pagesIds[0];\r\n    }\r\n\r\n    this.state = {\r\n      baseLoan: 1000000,\r\n      basePeriods: 1,\r\n      baseLoanRate: 0.10,\r\n      issueDate: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n      activePage: activePage || \"\",\r\n      pages: pages || {},\r\n      pagesIds: pagesIds || [],\r\n      renameLoan: false,\r\n      minimalAdditionalPayment: 1000\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateContent();\r\n  }\r\n\r\n  handleBaseLoanChange(e) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n\r\n    if (! isNaN(e.target.value)) {\r\n      currentPage[\"baseLoan\"] = e.target.value;\r\n    }\r\n    currentPage.isReady = false;\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages\r\n    });\r\n\r\n    this.updateContent();\r\n  }\r\n\r\n  handleBasePeriodsChange(e) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n\r\n    if (! isNaN(e.target.value)) {\r\n      currentPage[\"basePeriods\"] = e.target.value;\r\n    }\r\n    currentPage.isReady = false;\r\n\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages\r\n    });\r\n\r\n    this.updateContent();\r\n  }\r\n\r\n  handleBaseLoanRateChange(e) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n\r\n    if (! isNaN(e.target.value)) {\r\n      currentPage[\"baseLoanRate\"] = e.target.value;\r\n    }\r\n    currentPage.isReady = false;\r\n\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages\r\n    });\r\n\r\n    this.updateContent();\r\n  }\r\n\r\n  handleIssueDateChange(e) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n\r\n    currentPage[\"issueDate\"] = e.target.value;\r\n    currentPage.isReady = false;\r\n\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages\r\n    });\r\n\r\n    this.updateContent();\r\n  }\r\n\r\n  handleAddLoanTask() {\r\n    var pages = this.state.pages;\r\n    var pagesIds = this.state.pagesIds;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n\r\n    const newId = uniqueID();\r\n    pagesIds.push(newId);\r\n    pages[newId] = Object.assign(\r\n      {title: \"new loan\"},\r\n      deepcopy(currentPage),\r\n      {\r\n        id: newId,\r\n        isReady: false,\r\n      }\r\n    );\r\n    this.setState({\r\n      pages: pages,\r\n      pagesIds: pagesIds,\r\n      activePage: newId,\r\n    });\r\n\r\n    this.updateContent();\r\n  }\r\n\r\n  handleRemoveLoanTask() {\r\n    var pages = this.state.pages;\r\n    var pagesIds = this.state.pagesIds;\r\n    var activePageId = this.state.activePage;\r\n    var activeIndex = pagesIds.indexOf(activePageId);\r\n    var newPagesIds = pagesIds.filter((id) => id != activePageId);\r\n    pages[activePageId] = undefined;\r\n\r\n    activeIndex = activeIndex < 0 ? 0 : \r\n    activeIndex > newPagesIds.length - 1 ? newPagesIds.length - 1 : activeIndex;\r\n\r\n    this.setState({\r\n      pages: pages,\r\n      pagesIds: newPagesIds,\r\n      activePage: newPagesIds[activeIndex]\r\n    });\r\n\r\n    this.updateContent();\r\n  }\r\n\r\n  handleRenameLoan(newName) {\r\n    var activePage = this.state.activePage;\r\n    var pages = this.state.pages;\r\n    var page = pages[activePage];\r\n    page.title = newName;\r\n\r\n    pages[activePage] = page;\r\n    this.setState({\r\n      pages: pages,\r\n    });\r\n    \r\n    this.updateContent();\r\n  }\r\n\r\n  handleAddPaymentClicked(paymentIndex) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n    var additionalPayments = currentPage.additionalPayments ? currentPage.additionalPayments : {};\r\n    if (additionalPayments[paymentIndex]) {\r\n      additionalPayments[paymentIndex].makeEdit = true;\r\n      additionalPayments[paymentIndex].editValue = this.state.minimalAdditionalPayment;\r\n      additionalPayments[paymentIndex].value = this.state.minimalAdditionalPayment;\r\n    } else {\r\n      additionalPayments[paymentIndex] = { makeEdit: true, value: this.state.minimalAdditionalPayment, editValue: this.state.minimalAdditionalPayment };\r\n    }\r\n\r\n    currentPage.additionalPayments = additionalPayments;\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages,\r\n    });\r\n    \r\n    this.updateContent();\r\n  }\r\n\r\n  handleAdditionalPaymentChanged(paymentIndex, e) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n    var additionalPayments = currentPage.additionalPayments ? currentPage.additionalPayments : {};\r\n    console.assert(additionalPayments[paymentIndex], \"Attempt to change not existed additional payment\");\r\n\r\n    additionalPayments[paymentIndex].editValue = e.target.value;\r\n\r\n    currentPage.additionalPayments = additionalPayments;\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages,\r\n    });\r\n    \r\n    this.updateContent();\r\n  }\r\n\r\n  handleAdditionalPaymentFocus(paymentIndex, e) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n    var additionalPayments = currentPage.additionalPayments ? currentPage.additionalPayments : {};\r\n\r\n    additionalPayments[paymentIndex].editValue = additionalPayments[paymentIndex].value;\r\n    additionalPayments[paymentIndex].makeEdit = true;\r\n\r\n    currentPage.additionalPayments = additionalPayments;\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages,\r\n    });\r\n    \r\n    this.updateContent();\r\n  }\r\n\r\n  handleAdditionalPaymentBlur(paymentIndex, e) {\r\n    var pages = this.state.pages;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n    var additionalPayments = currentPage.additionalPayments ? currentPage.additionalPayments : {};\r\n\r\n    try {\r\n      var newValue = parseFloat(additionalPayments[paymentIndex].editValue);\r\n      additionalPayments[paymentIndex].value = isNaN(newValue) ? 0 : newValue;\r\n    } \r\n    catch(e) {\r\n      additionalPayments[paymentIndex].value = 0;\r\n    }\r\n    additionalPayments[paymentIndex].makeEdit = false;\r\n    if (additionalPayments[paymentIndex].value === 0) {\r\n      delete additionalPayments[paymentIndex];\r\n    }\r\n\r\n    currentPage.additionalPayments = additionalPayments;\r\n    pages[activePageId] = currentPage;\r\n    this.setState({\r\n      pages: pages,\r\n    });\r\n    \r\n    this.updateContent();\r\n  }\r\n\r\n\r\n  handleTabChange = (value) => {\r\n    this.setState({\r\n      activePage: value,\r\n    });\r\n\r\n    this.updateContent();\r\n  }\r\n\r\n  preparePayments(loanDesc) {\r\n    //const loanKey = objectHash(loanDesc);\r\n    //const loanDeskKey = loanKey + '-desc';\r\n    //var storedLoanDesc = JSON.parse(sessionStorage.getItem(loanDeskKey) );\r\n\r\n    var payments;\r\n    //if (storedLoanDesc && deepEqual(loanDesc, storedLoanDesc)) {\r\n      //payments = JSON.parse(sessionStorage.getItem(loanKey));\r\n    //}\r\n\r\n    //if (!payments) {\r\n      payments = calculateSchedule(loanDesc);\r\n      //sessionStorage.setItem(loanDeskKey, JSON.stringify(loanDesc));\r\n      //sessionStorage.setItem(loanKey, JSON.stringify(payments));\r\n    //}\r\n    return payments;\r\n  }\r\n\r\n  updateContent() {\r\n    this.setState((state, props) => {\r\n      var pages = state.pages;\r\n      var pagesIds = state.pagesIds;\r\n      var activePageId = state.activePage;\r\n      var currentPage = pages[activePageId];\r\n\r\n      if (currentPage === undefined) {\r\n        return;\r\n      }\r\n\r\n      var pagesStr = JSON.stringify(pages);\r\n      localStorage.setItem(\"pages\", pagesStr);\r\n      var idsStr = JSON.stringify(pagesIds);\r\n      localStorage.setItem(\"pagesIds\", idsStr);\r\n      localStorage.setItem(\"activePage\", activePageId);\r\n\r\n      const loanDesc = {\r\n        title: currentPage ? currentPage.title : 'New loan', \r\n        baseLoanRate: currentPage ? currentPage.baseLoanRate : state.baseLoanRate, \r\n        issueDate: currentPage ? currentPage.issueDate : state.issueDate,\r\n        baseLoan: currentPage ? currentPage.baseLoan : state.baseLoan,\r\n        basePeriods: currentPage ? currentPage.basePeriods : state.basePeriods,\r\n        additionalPayments: currentPage ? currentPage.additionalPayments : {}\r\n      };\r\n\r\n      var calcResults = this.preparePayments(loanDesc);\r\n      // paymentsPromise.then((function() {\r\n      //   const localPageId = activePageId;\r\n      //   return function(payments) {\r\n      //     this.setState((state, props) => {\r\n      //       var currentPage = state.pages[localPageId];\r\n      \r\n      //       currentPage.isReady = true;\r\n      //       currentPage.payments = payments;\r\n      //       pages[activePageId] = currentPage;\r\n      //       return {\r\n      //         pages: pages\r\n      //       }\r\n      //     });\r\n      //   }\r\n      // })().bind(this), function() {\r\n      //   console.log(\"Payment promise rejected\");\r\n      // });\r\n      currentPage.payments = calcResults.payments;\r\n      currentPage.baseMounthPayment = calcResults.baseMounthPayment;\r\n      currentPage.interestsOverall = calcResults.interestsOverall;\r\n      currentPage.isReady = true;\r\n      pages[activePageId] = currentPage;\r\n      return {\r\n        pages: pages\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    var pages = this.state.pages;\r\n    var pagesIds = this.state.pagesIds;\r\n    var activePageId = this.state.activePage;\r\n    var currentPage = pages[activePageId];\r\n\r\n    const payments = (currentPage && currentPage.payments) ? currentPage.payments : [];\r\n    const additionalPayments = (currentPage && currentPage.additionalPayments) ? currentPage.additionalPayments : {};\r\n    const contentIsReady = currentPage && currentPage.isReady;\r\n    \r\n    const content = currentPage && <div className={this.props.classes.taskContent}>\r\n                            <LoanTask\r\n                              baseLoan={currentPage.baseLoan} \r\n                              onBaseLoanChange={this.handleBaseLoanChange}\r\n                              basePeriods={currentPage.basePeriods}\r\n                              onBasePeriodsChange={this.handleBasePeriodsChange}\r\n                              baseLoanRate={currentPage.baseLoanRate}\r\n                              onBaseLoanRateChange={this.handleBaseLoanRateChange}\r\n                              issueDate={currentPage.issueDate}\r\n                              onIssueDateChange={this.handleIssueDateChange}\r\n                              isReady={contentIsReady} payments={payments} additionalPayments={additionalPayments}\r\n                              baseMounthPayment={currentPage.baseMounthPayment}\r\n                              interestsOverall={currentPage.interestsOverall} \r\n                              onAddPaymentClicked={this.handleAddPaymentClicked}\r\n                              onAdditionalPaymentChanged={this.handleAdditionalPaymentChanged}\r\n                              onAdditionalPaymentFocus={this.handleAdditionalPaymentFocus}\r\n                              onAdditionalPaymentBlur={this.handleAdditionalPaymentBlur} /> \r\n                          </div>;\r\n    \r\n    return (\r\n        <div className={this.props.classes.app}>\r\n          <AppBar color=\"primary\">\r\n            <Typography variant=\"h3\" color=\"textPrimary\" align=\"center\">\r\n              Loan calculator\r\n            </Typography>\r\n          </AppBar>\r\n          <TabContentController pagesIds={this.state.pagesIds}\r\n            pages={this.state.pages} \r\n            activePage={this.state.activePage}\r\n            onTabChange={this.handleTabChange}\r\n            onRenameTab={this.handleRenameLoan} \r\n            onAddTabClicked={this.handleAddLoanTask}\r\n            onDeleteTabClicked={this.handleRemoveLoanTask} />\r\n          {content}\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}